function placeFooterToPageBottom() {
  var footer = $("#footer");
  var pos = footer.position();
  var height = $(window).height();
  height = height - pos.top;
  height = height - footer.height();
  if (height > 0) {
    footer.css({
      'margin-top': height + 'px'
    });
  }
}

$(window).resize(function() {
  placeFooterToPageBottom();
});

$(function() {
  $("#expand-menu").click(function() {
    $(this).slideUp(400);
    $("#menu").removeClass("hide-for-small-only");
    $("#menu").hide();
    $("#menu").slideToggle(400);
  });

  $(".remove").click(function() {
    var deletedRow = $(this).closest("tr");
    var id = deletedRow.attr("id");

    if($(this).hasClass("application")) {
      var path = "{{ path('remove_application') }}";
    }
    if($(this).hasClass("job")) {
      var path = "{{ path('remove_job') }}";
    }

    $.post(path, {id: id}, function(result){
      deletedRow.fadeTo(400, 0, function() {
        $(this).remove();
        placeFooterToPageBottom();
      });
    });
  });

  $(".invite").click(function() {
    var id = $(this).closest("tr").attr("id");
    var tableField = $(this).closest("td");
    var path = "{{ path('invite') }}";

    $.post(path, {id: id}, function(result){
      tableField.html("&#10003;");
    });
  });

  $("textarea").richText({
    underline: false,
    leftAlign: false,
    centerAlign: false,
    rightAlign: false,
    justify: false,
    ol: false,
    ul: false,
    heading: false,
    fonts: false,
    fontColor: false,
    fontSize: false,
    imageUpload: false,
    fileUpload: false,
    videoEmbed: false,
    urls: false,
    table: false,
    removeStyles: false,
    code: false,
  });

  $.extend(true, $.fn.dataTable.defaults, {
    "language": {
      "url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Dutch.json"
    }
  });

  $("#employer-jobs").DataTable( {
    "searching": false,
    "info": false,
    "paging": false,
    "stripeClasses": []
  });

  $("#my-jobs, #my-applications").DataTable( {
    "columnDefs": [ {
      "targets": [4],
      "orderable": false
    }],
    "searching": false,
    "info": false,
    "paging": false,
    "stripeClasses": []
  });

  $("#job-applications").DataTable( {
    "searching": false,
    "stripeClasses": []
  });

  placeFooterToPageBottom();
});
